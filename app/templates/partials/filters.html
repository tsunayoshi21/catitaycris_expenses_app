{# Parcial con los filtros reutilizables para dashboard y transacciones #}
<div class="row g-3 align-items-end mb-3 filters-row">
  <!-- Selector de modo de fecha -->
  <div class="col-12 col-md-3">
    <label class="form-label">Modo de fecha</label>
    <div class="d-flex gap-3">
      <div class="form-check">
        <input class="form-check-input" type="radio" name="dateMode" id="mode-ym" value="ym">
        <label class="form-check-label" for="mode-ym">Año/Mes</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="dateMode" id="mode-range" value="range" checked>
        <label class="form-check-label" for="mode-range">Rango de días</label>
      </div>
    </div>
  </div>

  <!-- Controles Año/Mes -->
  <div id="ym-controls" class="col-12 col-md-5">
    <div class="row g-3">
      <div class="col-6 col-md-4">
        <label class="form-label">Año</label>
        <input id="year" type="number" class="form-control" placeholder="YYYY">
      </div>
      <div class="col-6 col-md-8">
        <label class="form-label">Mes</label>
        <select id="month" class="form-select">
          <option value="">Todos</option>
          <option value="1">Enero</option>
          <option value="2">Febrero</option>
          <option value="3">Marzo</option>
          <option value="4">Abril</option>
          <option value="5">Mayo</option>
          <option value="6">Junio</option>
          <option value="7">Julio</option>
          <option value="8">Agosto</option>
          <option value="9">Septiembre</option>
          <option value="10">Octubre</option>
          <option value="11">Noviembre</option>
          <option value="12">Diciembre</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Controles Rango de días -->
  <div id="range-controls" class="col-12 col-md-5">
    <div class="row g-3">
      <div class="col-6">
        <label class="form-label">Desde</label>
        <input id="start" type="date" class="form-control">
      </div>
      <div class="col-6">
        <label class="form-label">Hasta</label>
        <input id="end" type="date" class="form-control">
      </div>
    </div>
  </div>

  <!-- Tipo (dropdown multi-selección con check) -->
  <div class="col-12 col-md-4">
    <label class="form-label">Tipo</label>
    <div class="dropdown type-dropdown w-100">
      <button class="form-select dropdown-toggle text-start" type="button" id="typeDropdownBtn" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
        Todos
      </button>
      <ul class="dropdown-menu w-100" aria-labelledby="typeDropdownBtn" id="typeDropdownMenu">
        <li>
          <a class="dropdown-item d-flex justify-content-between align-items-center type-option" data-value="debito" href="#">
            <span>Débito</span>
            <span class="checkmark opacity-0">✓</span>
          </a>
        </li>
        <li>
          <a class="dropdown-item d-flex justify-content-between align-items-center type-option" data-value="credito" href="#">
            <span>Crédito</span>
            <span class="checkmark opacity-0">✓</span>
          </a>
        </li>
        <li>
          <a class="dropdown-item d-flex justify-content-between align-items-center type-option" data-value="transferencia" href="#">
            <span>Transferencia</span>
            <span class="checkmark opacity-0">✓</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Checkboxes ocultos para compatibilidad con Filters.js -->
    <input class="d-none" type="checkbox" name="type" id="type-debito" value="debito" checked>
    <input class="d-none" type="checkbox" name="type" id="type-credito" value="credito" checked>
    <input class="d-none" type="checkbox" name="type" id="type-transferencia" value="transferencia" checked>
  </div>

  <div class="col-6 col-md-2">
    <label class="form-label">Categoría</label>
    <input id="category" class="form-control" placeholder="todas">
  </div>
  <div class="col-12 col-md-3">
    <label class="form-label">Buscar</label>
    <input id="q" class="form-control" placeholder="texto libre">
  </div>
  <div class="col-12 col-md-2 ms-auto">
    <button id="resetFilters" class="btn btn-secondary w-100">Reset filtros</button>
  </div>
</div>

<style>
  /* Estilo minimalista y profesional para la lista de tipo (alineado con select nativo) */
  .type-dropdown .dropdown-item:hover,
  .type-dropdown .dropdown-item:focus {
    background-color: #dddddd !important; /* gris igual al hover del select nativo */
    color: #212529; /* texto estándar Bootstrap */
  }
  .type-dropdown .dropdown-item .checkmark {
    font-weight: 700;
    color: currentColor;
  }
  .type-dropdown .dropdown-item.selected .checkmark { opacity: 1 !important; }

  /* Radios de modo (Año/Mes vs Rango) en negro en vez de azul */
  .filters-row .form-check-input:checked {
    background-color: #212529 !important;
    border-color: #212529 !important;
  }
  .filters-row .form-check-input:focus {
    border-color: #212529 !important;
    box-shadow: 0 0 0 .25rem rgba(0,0,0,.25) !important;
  }
</style>
